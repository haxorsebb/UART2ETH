ifndef::imagesdir[:imagesdir: ../images]

[[section-context-and-scope]]
== Context and Scope

ifdef::arc42help[]
[role="arc42help"]
****
.Contents
Context and scope - as the name suggests - delimits your system (i.e. your scope) from all its communication partners
(neighboring systems and users, i.e. the context of your system). It thereby specifies the external interfaces.

If necessary, differentiate the business context (domain specific inputs and outputs) from the technical context (channels, protocols, hardware).

.Motivation
The domain interfaces and technical interfaces to communication partners are among your system's most critical aspects. Make sure that you completely understand them.

.Form
Various options:

* Context diagrams
* Lists of communication partners and their interfaces.


.Further Information

See https://docs.arc42.org/section-3/[Context and Scope] in the arc42 documentation.

****
endif::arc42help[]

=== System Overview

UART2ETH operates as a networking bridge that enables legacy industrial equipment with UART interfaces to communicate over TCP/IP networks. The system serves as a critical integration point in industrial automation environments, supporting two distinct operating modes:

**Gateway Mode**: UART2ETH adds networking capabilities to existing Host Systems without requiring firmware modifications. The Host System maintains its original UART-based communication while Client Systems access it via TCP sockets over the network.

**Full Bridge Mode**: UART2ETH provides transparent UART-over-TCP connectivity, allowing two Host Systems with UART interfaces to communicate over network infrastructure as if they were directly connected via serial cable.

=== System Scope and Boundaries

**Inside the System Boundary:**
- RP2350 microcontroller firmware
- Up to 4 UART interface controllers
- Network interface controller (100Mbit Ethernet)
- Protocol filtering and optimization engines
- OTA update mechanism with A/B partitioning
- Device configuration and management interfaces

**Outside the System Boundary:**
- Host Systems (PLCs, sensors, measurement instruments)
- Client Systems (SCADA systems, monitoring applications)
- Network infrastructure (switches, routers, firewalls)
- Firmware update servers and management systems
- External authentication and security systems

=== Business Context

[plantuml, system-context-business, svg]
----
!include <C4/C4_Context>

title Business Context - UART2ETH System

' Primary Users
Person(industrial_engineer, "Industrial Engineer", "Designs and implements automation solutions")
Person(system_integrator, "System Integrator", "Deploys and configures networking solutions")
Person(field_technician, "Field Technician", "Installs and maintains equipment")

' Core System
System(uart2eth_system, "UART2ETH", "UART-to-TCP bridge providing networking for up to 4 serial devices")

' Industrial Equipment - Host Systems
System_Ext(plc_system, "PLC/Controller", "Host System: Programmable Logic Controller with UART interface")
System_Ext(sensor_equipment, "Sensors/Instruments", "Host System: Measurement and monitoring devices")
System_Ext(legacy_equipment, "Legacy Equipment", "Host System: Existing industrial devices with serial interfaces")

' Network Systems - Client Systems
System_Ext(scada_system, "SCADA System", "Client System: Supervisory control and data acquisition")
System_Ext(monitoring_system, "Monitoring Application", "Client System: Real-time monitoring and analytics")
System_Ext(management_system, "Management System", "Client System: Device and process management")

' Infrastructure
System_Ext(network_infrastructure, "Network Infrastructure", "Ethernet switches, routers, and cabling")

' User Interactions
Rel(industrial_engineer, uart2eth_system, "Specifies integration requirements", "Requirements/Config")
Rel(system_integrator, uart2eth_system, "Deploys and configures", "Web UI/Config")
Rel(field_technician, uart2eth_system, "Installs and maintains", "Physical/Diagnostic")

' Gateway Mode Connections
Rel(uart2eth_system, plc_system, "Serial communication", "UART Protocol")
Rel(uart2eth_system, sensor_equipment, "Data collection", "UART Protocol")
Rel(scada_system, uart2eth_system, "Remote device access", "TCP Socket")
Rel(monitoring_system, uart2eth_system, "Real-time data", "TCP Socket")

' Full Bridge Mode (through network)
Rel(legacy_equipment, uart2eth_system, "Serial data transmission", "UART Protocol")
Rel(uart2eth_system, network_infrastructure, "Networked serial data", "TCP/IP")
Rel(network_infrastructure, management_system, "Remote serial access", "TCP/IP")

SHOW_LEGEND()
----

==== Primary Stakeholders

[cols="25,25,50"]
|===
| Stakeholder | Role | Primary Business Interactions

| Industrial Engineers
| Solution designers and specifiers
| Define networking requirements for automation projects, specify UART2ETH configurations for integrating legacy equipment into modern networks

| System Integrators
| Implementation specialists
| Deploy UART2ETH devices in customer facilities, configure networking parameters, integrate with existing SCADA and monitoring systems

| Field Technicians
| Installation and maintenance personnel
| Physical installation of devices, diagnostic troubleshooting, basic configuration changes, routine maintenance procedures

| Equipment Manufacturers
| Original equipment makers
| Embed UART2ETH into products to add networking capabilities, specify custom protocol filters, integrate with product lifecycle management

|===

==== Business Use Cases

**Legacy Equipment Integration:**
Industrial Engineers specify UART2ETH to network aging PLCs, sensors, and measurement instruments that lack modern connectivity. System Integrators deploy these solutions to extend equipment lifecycles and enable remote monitoring without costly equipment replacement.

**Infrastructure Problem Solving:**
Field installations requiring long cable runs or operating in electrically noisy environments use UART2ETH to overcome serial communication limitations through network-based transmission.

**Remote Access Enablement:**
SCADA systems and monitoring applications access distributed serial devices through UART2ETH bridges, enabling centralized control and data collection across geographically dispersed facilities.

=== Technical Context

[plantuml, system-context-technical, svg]
----
!include <C4/C4_Context>
LAYOUT_LEFT_RIGHT()

title Technical Context - UART2ETH System

' Core System
System_Boundary(uart2eth_boundary, "UART2ETH Device") {
    System(uart2eth_core, "UART2ETH", "RP2350-based bridge with 4 UART ports and 100Mbit Ethernet")
}

' UART Side - Host Systems
System_Ext(host_plc, "PLC/Controller", "Host System with RS232/RS485 UART interface")
System_Ext(host_sensor, "Sensor Array", "Host System with custom serial protocol")
System_Ext(host_legacy, "Legacy Device", "Host System with proprietary UART communication")

' Network Side Infrastructure
System_Ext(ethernet_switch, "Ethernet Switch", "Industrial network switch with PoE capability")
System_Ext(network_firewall, "Network Firewall", "Industrial security appliance")
System_Ext(dhcp_server, "DHCP Server", "Network configuration service")

' Network Side - Client Systems
System_Ext(client_scada, "SCADA Server", "Client System with TCP socket connectivity")
System_Ext(client_hmi, "HMI Application", "Client System for operator interface")
System_Ext(client_historian, "Data Historian", "Client System for data archival")

' Management Systems
System_Ext(firmware_server, "Firmware Server", "OTA update distribution system")
System_Ext(time_server, "NTP Server", "Network time synchronization")

' UART Connections (Host Systems)
Rel(host_plc, uart2eth_core, "Modbus RTU data", "RS485, 9600-115200 baud")
Rel(host_sensor, uart2eth_core, "Sensor readings", "RS232, custom protocol")
Rel_Back(uart2eth_core, host_legacy, "Control commands", "RS232, proprietary protocol")

' Network Infrastructure Connections
Rel(uart2eth_core, ethernet_switch, "Ethernet frames", "100BASE-TX, RJ45")
Rel(ethernet_switch, network_firewall, "Filtered traffic", "Gigabit Ethernet")
Rel(uart2eth_core, dhcp_server, "IP configuration", "DHCP/UDP")

' Client System Connections
Rel(client_scada, uart2eth_core, "Device polling", "TCP socket, port 502")
Rel(client_hmi, uart2eth_core, "Real-time data", "TCP socket, port 503")
Rel(client_historian, uart2eth_core, "Historical data", "TCP socket, port 504")

' Management Connections
Rel(firmware_server, uart2eth_core, "Firmware updates", "HTTPS/TLS 1.3")
Rel(uart2eth_core, time_server, "Time synchronization", "NTP/UDP")

SHOW_LEGEND()
----

==== Technical Interface Specifications

[cols="20,20,30,30"]
|===
| Interface | Type | Technical Details | Communication Pattern

| UART Ports (4x)
| Host System Interface
| RS232/RS485, 300-500k baud, configurable parameters
| Bidirectional serial, protocol-agnostic

| Ethernet Port
| Network Interface
| 100BASE-TX, RJ45 connector, Auto-MDIX
| TCP/IP networking, DHCP/Static IP

| TCP Sockets
| Client Interface
| Ports 502-505 (configurable), concurrent connections
| TCP client connections, application protocols

| Management Interface
| Configuration Interface
| Web UI (HTTPS), REST API, SNMP monitoring
| HTTPS/TLS 1.3, JSON configuration

| OTA Update Interface
| Firmware Interface
| Secure update server, A/B partition management
| HTTPS/TLS 1.3, signed firmware images

|===

==== Communication Protocols and Data Formats

**UART Communication:**
- Raw serial data transmission (protocol-agnostic)
- Configurable baud rates: 300 bps to 500 kbps
- Support for custom frame formats and timing requirements
- Hardware flow control (RTS/CTS) where supported

**Network Communication:**
- TCP socket connections for data transmission
- JSON for configuration and management data
- Binary protocol passthrough with optional filtering
- HTTPS for secure management and OTA updates

**Network Protocols:**
- IPv4 with DHCP or static configuration
- NTP for time synchronization
- SNMP v2c/v3 for monitoring and management
- DNS for name resolution

=== Operating Mode Contexts

==== Gateway Mode Context

[plantuml, gateway-mode-context, svg]
----
!include <C4/C4_Context>

title Gateway Mode - Adding Network Capabilities

Person(operator, "Equipment Operator", "Uses networked access to legacy equipment")

System_Boundary(gateway_setup, "Gateway Mode Configuration") {
    System(uart2eth_gw, "UART2ETH Gateway", "Provides network access to Host System")
}

System_Ext(host_equipment, "Host System", "Legacy equipment with UART interface (PLC, sensor, etc.)")
System_Ext(client_app, "Client System", "Network application accessing Host System")
System_Ext(network_infra, "Network Infrastructure", "Ethernet network")

' Gateway mode connections
Rel(host_equipment, uart2eth_gw, "Native serial protocol", "UART")
Rel(uart2eth_gw, network_infra, "TCP/IP encapsulation", "Ethernet")
Rel(client_app, network_infra, "Network requests", "TCP Socket")
Rel(operator, client_app, "Remote operation", "Application UI")

note right of uart2eth_gw : Host System keeps original\nfirmware and protocols.\nClient Systems access via\nTCP sockets.

SHOW_LEGEND()
----

**Gateway Mode Data Flow:**
1. Host System sends serial data using original protocol to UART2ETH
2. UART2ETH receives serial data and applies protocol filtering/optimization
3. Processed data is transmitted to Client Systems via TCP sockets
4. Client Systems send responses back through TCP connections
5. UART2ETH forwards responses to Host System via UART interface

==== Full Bridge Mode Context

[plantuml, bridge-mode-context, svg]
----
!include <C4/C4_Context>

title Full Bridge Mode - Transparent UART Extension

Person(technician, "Field Technician", "Manages distributed serial connections")

System_Boundary(bridge_setup, "Full Bridge Mode Configuration") {
    System(uart2eth_a, "UART2ETH A", "Local bridge device")
    System(uart2eth_b, "UART2ETH B", "Remote bridge device")
}

System_Ext(host_system_a, "Host System A", "Local equipment with UART")
System_Ext(host_system_b, "Host System B", "Remote equipment with UART")
System_Ext(wan_network, "WAN Network", "Wide area network connection")

' Full bridge connections
Rel(host_system_a, uart2eth_a, "Serial communication", "UART")
Rel(host_system_b, uart2eth_b, "Serial communication", "UART")
Rel(uart2eth_a, wan_network, "Encapsulated serial", "TCP/IP")
Rel(uart2eth_b, wan_network, "Encapsulated serial", "TCP/IP")
Rel(technician, uart2eth_a, "Configuration", "Web UI")
Rel(technician, uart2eth_b, "Configuration", "Web UI")

note bottom of wan_network : Both Host Systems communicate\nas if directly connected\nvia serial cable

SHOW_LEGEND()
----

**Full Bridge Mode Data Flow:**
1. Host System A sends serial data to UART2ETH A
2. UART2ETH A encapsulates serial data in TCP packets and transmits over network
3. UART2ETH B receives TCP packets and extracts original serial data
4. UART2ETH B forwards serial data to Host System B via UART
5. Bidirectional communication maintains transparent serial connection

=== Integration Architecture

==== Critical Dependencies

**Network Infrastructure Dependencies:**
- Reliable Ethernet connectivity for TCP/IP communication
- Network switches with appropriate bandwidth and latency characteristics
- DHCP services for automatic IP configuration (or static IP management)
- Network time synchronization for accurate timestamping

**Power and Environmental Dependencies:**
- Stable 12V or PoE power supply within industrial specifications
- Operating temperature range suitable for industrial environments
- Protection from electromagnetic interference in industrial settings

**Security Dependencies:**
- Network firewall configuration to allow necessary TCP ports
- Firmware signing infrastructure for secure OTA updates
- Network segmentation appropriate for industrial security requirements

==== Security and Compliance Boundaries

**Network Security:**
- TLS 1.3 encryption for management interfaces and OTA updates
- Configurable TCP port ranges to support firewall policies
- SNMP v3 authentication for monitoring access
- Input validation and sanitization for all network interfaces

**Industrial Compliance:**
- CE certification for European industrial markets
- Electromagnetic compatibility (EMC) for industrial environments
- Component sourcing from Western suppliers for regulatory compliance
- Audit trail for firmware updates and configuration changes

==== Performance and Scalability Characteristics

**Performance Requirements:**
- 500 kbps sustained throughput per UART port
- Sub-5ms end-to-end latency for real-time applications
- Concurrent TCP connections (one per UART port)
- Configurable buffering for latency vs. throughput optimization

**Scalability Considerations:**
- Up to 4 simultaneous UART-to-TCP bridges per device
- Network deployment limited by IP address availability and network bandwidth
- Protocol filtering reduces network traffic for efficient bulk transfers
- A/B firmware updates enable fleet-wide updates without service interruption

=== Future State Considerations

==== Planned Integrations

**Enhanced Protocol Support:**
- Additional protocol filters for common industrial protocols (Modbus, DNP3, IEC 61850)
- Integration with industrial IoT platforms and cloud services
- Support for wireless network interfaces (Wi-Fi, cellular)

**Advanced Management Features:**
- Integration with network management systems (SNMP, NETCONF)
- Enhanced diagnostic and monitoring capabilities
- Fleet management and bulk configuration tools

==== Evolution Path

**Hardware Evolution:**
- Next-generation microcontroller support for increased performance
- Additional UART ports and network interfaces
- Integration with industrial edge computing platforms

**Software Architecture Evolution:**
- Microservices-based firmware architecture for enhanced modularity
- Container-based protocol filter deployment
- Integration with modern DevOps and CI/CD pipelines for firmware development